<!DOCTYPE HTML>
<html lang="en">
<head>
	<title>Школа программистов HH - JavaScript / Anton Ivanov / тест задания 1</title>
	<meta charset="utf-8">
</head>
<body>

<script src="js/underscore.js"></script>
<script src="js/backbone.js"></script>
<script src="js/main.js"></script>

<script>

    var numOfErrors = 0;

    function test(name, result, expected) {
        'use strict';

        if (result !== expected) {
            //noinspection JSLint
            console.log(name + ': result = ' + result + ', expected = ' + expected);
            //noinspection JSLint
            numOfErrors++;
        }

    }

    //noinspection JSLint
    var pastEvents = cal.get_past();
    test('Num. of past events', pastEvents.length, 1);
    test('Past event name', pastEvents[0].get('name'), 'Первая лекция');

    var futureEvents = cal.get_future();
    test('Num. of future events', futureEvents.length, 1);
    test('Future event name', futureEvents[0].get('name'), 'Вторая лекция');

    var byTagImportant = cal.get_by_tags(['important']);
    test('Num. of events by tag important', byTagImportant.length, 1);
    test('Tag important event name', byTagImportant[0].get('name'), 'Вторая лекция');

    var byTags = cal.get_by_tags(['hh', 'java script']);
    test('Num. of events by tags', byTags.length, 2);

    var byMissingTag = cal.get_by_tags(['missing']);
    test('Num. of events by missing tag', byMissingTag.length, 0);

    var testEvent = {
        name: 'test',
        due_date: new Date((new Date()).getFullYear() + 1, 1),
        tags: ['test']
    };
    var id = cal.add(testEvent);
    test('New num. of past events', cal.get_past().length, 1);
    test('New num. of future events', cal.get_future().length, 2);
    test('Num. of events by tag test', cal.get_by_tags(['test']).length, 1);

    cal.edit(id, {name: 'test 1'});
    var byTagTest = cal.get_by_tags(['test']);
    test('New name of added event', byTagTest[0].get('name'), 'test 1');

    cal.remove(id);
    test('Num. of events by tag test', cal.get_by_tags(['test']).length, 0);

    if (numOfErrors === 0) {
        //noinspection JSLint
        console.log('All tests passed successfully');
    } else {
        //noinspection JSLint
        console.log('see errors above');
    }


</script>
</body>	
</html>